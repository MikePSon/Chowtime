<%= stylesheet_link_tag "plugins", media: "all", "data-turbolinks-track" => true %>

<style>
  .recipe_container .row-fluid {
    overflow:hidden;
    margin-bottom:15px;
  }
  .recipe_container [class*="col-"] {
    margin-bottom: -99999px;
    padding-bottom: 99999px;
  }
  textarea.form-control { 
    resize: none;
    width: 100%;
    height: 132px;
  }
  .time_control {
    display:inline;
    width: 45%;
  }

</style>

<%= form_for(@recipe, :html => {:class => 'form-horizontal'}) do |f| %>
  <% if @recipe.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@recipe.errors.count, "error") %> prohibited this recipe from being saved:</h2>

      <ul>
      <% @recipe.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="container-fluid hidden-xs recipe_container">
    <div class="row-fluid">
      <div class="col-sm-6">
        <div class="form-group">
          <%= f.label :name, :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-10">
            <%= f.text_field :name, :class => "form-control", :autofocus => true, :placeholder => "Recipe Name" %>
          </div>
        </div>
        <div class="form-group">
          <%= f.label :quickhit, :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-10">
            <%= f.text_field :quickhit, :class => "form-control", :placeholder => "Short Description" %>
          </div>
        </div>
        <div class="form-group">
          <%= f.label :serves, :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-4">
            <%= f.number_field :serves, :class => "form-control", :placeholder => "Serves" %>
          </div>
          <%= f.label :calories_value, "Calories", :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-4">
            <%= f.number_field :calories_value, :class => "form-control", :placeholder => "Calories" %>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <%= f.label :description, :class => "col-xs-12 col-sm-3 control-label" %>
        <div class="col-xs-12 col-sm-9">
          <%= f.text_area :description, :class => "form-control", :placeholder => "Say something about the recipe here..." %>
        </div>
      </div>
    </div>

    <div class="row-fluid">
      <div class="col-sm-6">
        <div class="form-group">
          <%= f.label :fat_value, "Fat", :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-4">
            <%= f.number_field :fat_value, :class => "form-control", :placeholder => "Fat" %>
          </div>
          <%= f.label :saturated_fat_value, "Saturated Fat", :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-4">
            <%= f.number_field :saturated_fat_value, :class => "form-control", :placeholder => "Saturated Fat" %>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="form-group">
          <%= f.label :foodPic, "Picture", :class => "col-xs-12 col-sm-3 control-label" %>
          <div class="col-xs-12 col-sm-9">
            <%= f.file_field :foodPic, :class => "" %>
          </div>
        </div>
      </div>
    </div>

    <div class="row-fluid">
      <div class="col-sm-6">
        <div class="form-group">
          <%= f.label :protein_value, "Protein", :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-4">
            <%= f.number_field :protein_value, :class => "form-control", :placeholder => "Protein" %>
          </div>
          <%= f.label :carbs_value, "Carbs", :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-4">
            <%= f.number_field :carbs_value, :class => "form-control", :placeholder => "Carbohydrates" %>
          </div>
        </div>
        <div class="form-group">
          <%= f.label :sugar_value, "Sugar", :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-4">
            <%= f.number_field :sugar_value, :class => "form-control", :placeholder => "Sugar" %>
          </div>
          <%= f.label :fiber_value, "Fiber", :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-4">
            <%= f.number_field :fiber_value, :class => "form-control", :placeholder => "Fiber" %>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="form-group">
          <%= f.label :recipe_tagsl, "Type", :class => "col-xs-12 col-sm-3 control-label" %>
          <div class="col-xs-12 col-sm-9">
            <%= select_tag "tag_list", options_from_collection_for_select(RecipeTag.all, 'id', 'name',@recipe.recipe_tags.map{ |j| j.id }), :multiple => true, :class => "form-control" %>
            <span class="help-block">Multiple select (Hold CTRL key )</span>
          </div>
        </div>
      </div>
    </div> <!-- End row-fluid -->

    <div class="row-fluid">
      <div class="col-sm-6">

        <div class="form-group">

          <%= f.label :prep_time, "Prep Time", :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-4">
            <%= f.time_select :prep_time, :class => "form-control" %>
          </div>

          <%= f.label :cook_time, "Cook Time", :class => "col-xs-12 col-sm-2 control-label" %>
          <div class="col-xs-12 col-sm-4">
            <%= f.time_select :cook_time, :class => "form-control" %>
          </div>

        </div>
      </div>
      <div class="col-sm-6">
      </div>
    </div> <!-- End row-fluid -->


    




  </div>

  <hr class="star-primary">

  <style>
    h4 .links { float:right; padding-top: 0; }
  </style>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="col-xs-12 col-sm-6">
        <div class="" id="ingredients">
          <fieldset>
            <h4>
              Ingredients
            </h4>
            <%= f.fields_for :ingredients do |ingredient| %>
              <%= render 'ingredient_fields', f: ingredient %>
            <% end %>
                  
            <div class="links">
              <%= link_to_add_association '<i class="br-plus"></i> Add ingredient'.html_safe, f, :ingredients, :class => "btn btn-default" %>
            </div>
          </fieldset>
        </div>
      </div><!-- End Ingredient Container -->


      <div class="col-xs-12 col-sm-6">
        <div class="" id="steps">
          <fieldset>
            <h4>Steps</h4>
            <%= f.fields_for :steps do |step| %>
              <%= render 'step_fields', f: step %>
            <% end %>
            <div class="links">
                <%= link_to_add_association '<i class="br-plus"></i> Add step'.html_safe, f, :steps, :class => "btn btn-default" %>
              </div>
          </fieldset>
        </div>
      </div><!-- End Recipe Container -->
    </div>
  </div>

  
  
  <div class="actions" style="margin-top:20px;">
    <%= f.submit :class => 'btn btn-success' %>
  </div>

  <div class="field" style="display:none;">
    <%= f.label :user_id %><br>
    <%= f.text_field :user_id %>
  </div>

  <div class="field" style="display:none;">
    <%= f.label :calories_percent %><br>
    <%= f.text_field :calories_percent %>
  </div>

  <div class="field" style="display:none;">
    <%= f.label :fat_percent %><br>
    <%= f.text_field :fat_percent %>
  </div>

  <div class="field" style="display:none;">
    <%= f.label :saturated_fat_percent %><br>
    <%= f.text_field :saturated_fat_percent %>
  </div>

  <div class="field" style="display:none;">
    <%= f.label :protein_percent %><br>
    <%= f.text_field :protein_percent %>
  </div>

  <div class="field" style="display:none;">
    <%= f.label :carbs_percent %><br>
    <%= f.text_field :carbs_percent %>
  </div>

  <div class="field" style="display:none;">
    <%= f.label :sugar_percent %><br>
    <%= f.text_field :sugar_percent %>
  </div>

  <div class="field" style="display:none;">
    <%= f.label :fiber_percent %><br>
    <%= f.text_field :fiber_percent %>
  </div>

<% end %>

<script>
  //Default User ID
  $('#recipe_user_id').val("<%= current_user.id %>");

  //File Input scripting
  $(":file").filestyle({
    buttonText: "Select file",
    classButton: "btn btn-primary",
    classInput: "form-control file-upload",
    classIcon: "fa-plus-sign"
  });

  $('#recipe_cook_time_4i').addClass("form-control time_control");
  $('#recipe_cook_time_5i').addClass("form-control time_control");
  $('#recipe_prep_time_4i').addClass("form-control time_control");
  $('#recipe_prep_time_5i').addClass("form-control time_control");

  

</script>

<%= javascript_include_tag "plugins/forms/bootstrap-filestyle/bootstrap-filestyle", "data-turbolinks-track" => true %>